<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="add_rfm_segment_in_partner_kanban" model="ir.ui.view">
            <field name="name">res.partner.kanban.extended</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.res_partner_kanban_view" />
            <field name="arch" type="xml">
                <field name="active" position="before">
                    <field name="rfm_segment_id"/>
                    <field name="rfm_score_id" readonly="1"/>
                </field>
            </field>
        </record>

        <record id="add_rfm_segment_in_partner_tree" model="ir.ui.view">
            <field name="name">res.partner.tree.extended</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_tree" />
            <field name="arch" type="xml">
                <field name="email" position="after">
                    <field name="rfm_segment_id" readonly="1" />
                    <field name="rfm_score_id" readonly="1"/>
                </field>
            </field>
        </record>

        <record id="rfm_segment_partner_form" model="ir.ui.view">
            <field name="name">rfm.segment.partner.form</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form/sheet/div[@name='button_box']" position="inside">
                    <button name="open_partner_rfm_segment_history" string="Segment History" type="object"
                            class="oe_stat_button" icon="fa-bars"/>
                </xpath>
                <xpath expr="//notebook" position="inside">
                    <page name="setu_rfm" string="RFM">
                        <group>
                            <field name="is_dynamic_rule_enable" invisible="1"/>
                            <field name="rfm_segment_id" readonly="1"/>
                        </group>
                        <group string="Sales Team Segments" groups="setu_rfm_analysis.group_sales_team_rfm">
                            <group>
                                <field name="rfm_team_segment_ids" nolabel="1" readonly="1" >
                                    <list readonly="1">
                                        <field name="segment_id"/>
                                        <field name="team_id" string="Sales Team"/>
                                        <field name="score_id"/>
                                    </list>
                                </field>
                            </group>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>

        <record id="add_rfm_segment_in_partner_search" model="ir.ui.view">
            <field name="name">res.partner.search.extended</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_res_partner_filter" />
            <field name="arch" type="xml">
                <field name="user_id" position="after">
                    <separator/>
                    <filter string="Champions Customers" name="type_person" domain="[('rfm_segment_id', 'ilike', 'champion')]"/>
                    <filter string="Loyal Customers" name="Loyal" domain="[('rfm_segment_id', 'ilike', 'loyal')]"/>
                    <filter string="Promising - Faithful Customers" name="Promising_Faithful" domain="[('rfm_segment_id', 'ilike', 'promising')]"/>
                    <filter string="Highest Paying Customers" name="Highest_Paying" domain="[('rfm_segment_id', 'ilike', 'highest')]"/>
                    <filter string="Needing Attention Customers" name="Needing_Attention" domain="[('rfm_segment_id', 'ilike', 'needing')]"/>
                    <filter string="Newest Customers" name="Newest" domain="[('rfm_segment_id', 'ilike', 'newest')]"/>
                    <filter string="Sleeping Customers" name="Sleeping" domain="[('rfm_segment_id', 'ilike', 'sleeping')]"/>
                    <separator/>
                </field>
            </field>
        </record>
    </data>
</odoo>
