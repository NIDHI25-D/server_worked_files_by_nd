M4rv3l123$

Command Information :
-------------------
ðŸ‘‰ï¸LSB :
The Linux Standard Base (http://www.linuxbase.org/) is a standard. core system that third-party applications written for Linux can. depend upon. . This package provides an   implementation of the core of the Linux Standard.

ðŸ‘‰ï¸wget ca-certificates :
Certificates can be digitally signed by a Certification Authority, or CA. A CA is a trusted third party that has confirmed that the information contained in the certificate is accurate.

ðŸ‘‰ï¸wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add - : 
This command fetches the PostgreSQL repository's GPG key and adds it to the list of trusted keys on your system, allowing you to install packages from that repository securely.

sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt/ `lsb_release -cs`-pgdg main" >> /etc/apt/sources.list.d/pgdg.list
-----> to see ::  cd: /etc/apt/sources.list.d
				  vim pgdg.list
				  (esc :q!)
ðŸ‘‰ï¸sudo apt-get install postgresql postgresql-contrib : 
install the Postgres package along with a -contrib package that adds some additional utilities and functionality

ðŸ‘‰ï¸create user odoo14 with password 'M4rv3l123$' createdb : 
createdb to give rights of createdb


---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

CONNECTION :
----------- 
ðŸ‘‰ï¸Connect to : ssh administrator@192.168.110.67
ls
md2p2-db-08enero2024.sql.gz  us1alx002a-filestore-05enero2024.tar.gz
ðŸ‘‰ï¸1st Procedure : 
-------------
	sudo apt install lsb-core
	sudo apt-get install wget ca-certificates 
	wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
	sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt/ `lsb_release -cs`-pgdg main" >> /etc/apt/sources.list.d/pgdg.list'
	sudo apt-get update
	sudo apt-get install postgresql postgresql-contrib

	CHECK POSTGRES : 
	--------------
			(upto administration : ls to get name of sql.gz and tar)
		sudo su postgres
		psql
		create user odoo14 with password 'M4rv3l123$' createdb;
		\du (to check users)
		create database mdh_production_14 with owner odoo14;
		\l (to check db)
		cd
		gunzip < md2p2-db-08enero2024.sql.gz | psql db_name

		psql mdh_production_14
		--Queries : 
			update ir_config_parameter set value='backup_db' where key='database.uuid';
			update ir_config_parameter set value='M20061616941178' where key='database.enterprise_code';
			Update ir_cron set active='f';
			Update delivery_carrier set active = 'f';
			Update payment_acquirer set state='disabled';
			Update ir_mail_server set active='f';
			Update fetchmail_server set active='f';
			Update res_company set l10n_mx_edi_pac_test_env = 't';
			cd 
	Extract tar.gz :
	--------------
					 (tar name from ls ðŸ‘‡ï¸)	         (as simple /tmp/ ðŸ‘‡ï¸was not working so wrote --directory)	
	administrator@us1alx002a : tar -xvzf us1alx002a-filestore-05enero2024.tar.gz --directory=/tmp/
	
	After extracting file :
	---------------------
	administrator@us1alx002a: cd /tmp/opt
				   mv odoo14/ /opt/
	                          cd /opt/odoo14/filestore/filestore
	                          ls
                              (db_name already present) (new_db_name)
	                          mv mdh_prod mdh_production_14


	setup odoo-server.conf file :
	---------------------------
	administrator@us1alx002a:~$ cd /opt/odoo14/conf
					ls
					vim odoo14-server.conf
	----(insert) i
		db_user=odoo14
		db_password=M4rv3l123$
		db_host=localhost
		db_name=mdh_production_14
		db_post=5432

		remove : limit_time_cpu=12000
				 limit_time_real=12000
				 server_wide_modules = web,queue_job
				 workers=10
	
	Install python :				 
	--------------
	administrator@us1alx002a:~$ sudo apt update && sudo apt upgrade
								sudo apt install python3.8-dbg
								sudo apt install python3.8-dev
								sudo apt install python3.8-distutils
								sudo apt install python3.8-venv
								python3.8 --version

	sudo apt-get install libpq-dev python-dev libxml2-dev libxslt1-dev libldap2-dev libsasl2-dev libffi-dev libjpeg-dev zlib1g-dev

	Now enter in the sudo su : (installation of pip and other libraries)
	-------------------------
	administrator@us1alx002a:~$ sudo su 
	@us1alx002a:/home/administrator# sudo apt install python3-pip
										 /usr/bin/python3.8 -m pip install -r /opt/odoo14/odoo/requirements.txt

										 /usr/bin/python3.8 -m pip install psycopg2-binary								 
										 /usr/bin/python3.8 -m pip install pandas
										 /usr/bin/python3.8 -m pip install html2text
										 /usr/bin/python3.8 -m pip install mercadopago
										 /usr/bin/python3.8 -m pip install /opt/odoo14/custom_addons/mdh_14/meli_oerp/requirements.txt
										 pip install urllib3==1.25.6


	Creates Users:
	--------------
	administrator@us1alx002a:~$ sudo su 
					[sudo] password for administrator: 
					root@us1alx002a:/home/administrator# sudo passwd odoo14
					New password: M4rv3l123$
					Retype new password: M4rv3l123$

	
    Creates the server init file and give them access rights:
    ----------------------------------------------------------
    administrator@us1alx002a:~$ sudo su
				cat > odoo14-server 
				Cntrl C
				vim odoo14-server (mentioned down)
				(content of file odoo14-server need to prepare )
				sudo mv odoo14-server /etc/init.d
				cd /etc/init.d
				cd
				sudo chmod 755 /etc/init.d/odoo14-server
				sudo update-rc.d /etc/init.d/odoo14-server defaults


	
	Logout:::Login with odoo14:
	------
	cd
	cd
	ssh odoo14@192.168.110.67							
	/usr/bin/python3.8 /opt/odoo14/odoo/odoo-bin -c /opt/odoo14/conf/odoo14-server.conf --logfile=
	--->upgrade all
	/usr/bin/python3.8 /opt/odoo14/odoo/odoo-bin -c /opt/odoo14/conf/odoo14-server.conf -d mdh_production_14 -u all --stop-after-init  --logfile=

	Errors : 
	-------
	1)AttributeError: module 'lib' has no attribute 'X509_V_FLAG_NOTIFY_POLICY'
		sudo rm -R /usr/lib/python3/dist-packages/OpenSSL
		pip3 install pyOpenSSL --upgrade
	2)Install "sudo pip3 install paramiko
	
	==================================================
	If there are no log after Modules Loaded then :
	---------------------------------------------
	Check whether port is working or not from the command : 
		 INSTALL NGIX
		 sudo apt install net-tools
		 sudo apt-get install nginx
		 
		 cd /etc/nginx/sites-enabled/
	         ping 192.168.110.67
		 telnet 127.0.0.1 80
		 wget http://192.168.110.67:8068
		 vim index.html
		 vim index.html.1
		 
===================================================================================================================================================================
FILE : odoo14-server --->
--------------------
#!/bin/sh
### BEGIN INIT INFO
# Provides: odoo14-server
# Required-Start: $remote_fs $syslog
# Required-Stop: $remote_fs $syslog
# Should-Start: $network
# Should-Stop: $network
# Default-Start: 2 3 4 5
# Default-Stop: 0 1 6
# Short-Description: Enterprise Business Applications
# Description: ODOO Business Applications
### END INIT INFO
PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/bin
DAEMON=/opt/odoo14/odoo/odoo-bin
NAME=odoo14-server
DESC=odoo14-server
# Specify the user name (Default: odoo).
USER=odoo14
# Specify an alternate config file (Default: /etc/openerp-server.conf).
CONFIGFILE="/opt/odoo14/conf/odoo14-server.conf"
# pidfile
PIDFILE=/var/run/${NAME}.pid
# Additional options that are passed to the Daemon.
DAEMON_OPTS="-c $CONFIGFILE"
[ -x $DAEMON ] || exit 0
[ -f $CONFIGFILE ] || exit 0
checkpid() {
[ -f $PIDFILE ] || return 1
pid=`cat $PIDFILE`
[ -d /proc/$pid ] && return 0
return 1
}
case "${1}" in
start)
echo -n "Starting ${DESC}: "
start-stop-daemon --start --quiet --pidfile $PIDFILE --chuid $USER --background --make-pidfile --exec $DAEMON -- $DAEMON_OPTS
echo "${NAME}."
;;
stop)
echo -n "Stopping ${DESC}: "
start-stop-daemon --stop --quiet --pidfile $PIDFILE --oknodo
echo "${NAME}."
;;
restart|force-reload)
echo -n "Restarting ${DESC}: "
start-stop-daemon --stop --quiet --pidfile $PIDFILE --oknodo
sleep 1
start-stop-daemon --start --quiet --pidfile $PIDFILE --chuid $USER --background --make-pidfile --exec $DAEMON -- $DAEMON_OPTS
echo "${NAME}."
;;
*)
N=/etc/init.d/$NAME
echo "Usage: $NAME {start|stop|restart|force-reload}" >&2
exit 1
;;
esac
exit 0
		 
===================================================================================================================================================================
ðŸ‘‰ï¸ðŸ‘‰ï¸Overview of the file : 
-------------------

M4rv3l123$

Install Agrobolder Server

Postgres - 
sudo apt install lsb-core
sudo apt-get install wget ca-certificates
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt/ `lsb_release -cs`-pgdg main" >> /etc/apt/sources.list.d/pgdg.list'
sudo apt-get update
sudo apt-get install postgresql postgresql-contrib

sudo su postgres - 
psql
create user odoo14 with password 'M4rv3l123$' createdb;
create database agrobolder_production_14 with owner odoo14;
gunzip < sql.gz | psql db_name

psql agrobolder_production_14

update ir_config_parameter set value='backup_db' where key='database.uuid';
update ir_config_parameter set value='M20061616941178' where key='database.enterprise_code';


Extract tar.gz file to tmp folder
tar â€“xvzf *.tar.gz --directory=/tmp/

After done with extracting file - 
cd /tmp/opt
mv odoo14/ /opt/
cd /opt/odoo14/filestore/filestore
mv db_name created_db_name


setup odoo-server.conf file
db_user=odoo14
db_host=localhost
db_password=M4rv3l123$
db_post=5432


Install python
sudo apt update && sudo apt upgrade
sudo apt install python3.8-dbg
sudo apt install python3.8-dev
sudo apt install python3.8-distutils
sudo apt install python3.8-venv

sudo apt-get install libpq-dev python-dev libxml2-dev libxslt1-dev libldap2-dev libsasl2-dev libffi-dev libjpeg-dev zlib1g-dev

sudo su 
sudo apt install python3-pip
/usr/bin/python3.8 -m pip install psycopg2-binary
/usr/bin/python3.8 -m pip install pandas, html2text, mercadopago, httpagentparser
/usr/bin/python3.8 -m pip install /opt/odoo14/odoo/requirements.txt
	
Creates the server init file and give them access rights.
cat > odoo14-server
vim odoo14-server and put the server file content in it.
sudo mv odoo14-server /etc/init.d
cd /etc/init.d
sudo 755 odoo14-server
sudo chown root: odoo14-server
sudo update-rc.d odoo14-server defaults

Add user in opt/odoo14 folder.
sudo adduser --system --quiet --shell=/bin/bash --home=/opt/odoo14 --gecos 'ODOO' --group odoo14

	


sudo su root
cd /etc/letsencrypt/live/
rm -rf hom.mdhbikes.com 
