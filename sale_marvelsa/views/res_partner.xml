<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>

		<record model="ir.ui.view" id="view_delivery_address_partner_tree">
	        <field name="name">delivery address partner tree</field>
	        <field name="model">res.partner</field>
	        <field name="arch" type="xml">
				<list create="false">
					<field name="name"/>
					<field name="phone"/>
					<field name="email"/>
					<field name="street"/>
					<field name="city"/>
					<field name="state_id"/>
				</list>
			</field>
		</record>

		<record model="ir.ui.view" id="view_delivery_address_partner_form">
	        <field name="name">Delivery address partner form</field>
	        <field name="model">res.partner</field>
	        <field name="arch" type="xml">
	        	<form create="false">
	        		<group>
	        			<h1>
	        				<field name="name" readonly="1"/>
	        				<field name="user_id" invisible="1"/>
	        			</h1>

	        		</group>
		        	<notebook>
		        		<page string="Delivery Address">
		        			<field name="child_ids" context="{'default_parent_id': id, 'default_user_id': user_id, 'default_type': 'delivery', 'default_customer': False, 'default_supplier': False}">
		        				<form>
						            <field name="type" readonly="1" widget="radio" options="{'horizontal': true}" />
						            <hr/>
						            <group>
						            	<field name="postal_code_id" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>

						            	<group>
                                            <label for="street" string="Address"/>
                                            <div>
                                                <div class="o_address_format" name="div_address">
                                                    <field name="street" placeholder="Street..." class="o_address_street" attrs="{'required': [('type','=','delivery')]}"/>
                                                    <field name="street_name" placeholder="Street..." class="o_address_street" attrs="{'required': [('type','=','delivery')]}"/>
                                                    <field name="street2" placeholder="Street 2..." class="o_address_street" attrs="{'required': [('type','=','delivery')]}"/>
                                                    <field name="city" placeholder="City" attrs="{'required': [('type','=','delivery')]}"/>
                                                    <field name="state_id" class="o_address_state" placeholder="State" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" context="{'country_id': country_id, 'zip': zip}"/>
                                                    <field name="zip" placeholder="ZIP" class="o_address_zip"/>
                                                    <field name="country_id" placeholder="Country" class="o_address_country" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                                </div>
                                            </div>
                                        </group>

						            	<group>
						                    <field name="name" string="Contact Name" required="1"/>
						                    <field name="email"/>
						                    <field name="phone" widget="phone"/>
						                    <field name="mobile" widget="phone"/>

						                    <field name="comment" placeholder="internal note..."/>
												<field name="warehouse_sugerido_id"
													   options="{'no_create': True, 'no_open': True}" required="1"/>

						                </group>
						            </group>
						            <field name="supplier_rank" invisible="True"/>
						            <field name="customer_rank" invisible="True"/>
						            <field name="lang" invisible="True"/>
						            <field name="user_id" invisible="True"/>
							    </form>
							    <list string="Delivery Address">
							    	<field name="address"/>
							    	<field name="name"/>
							    	<field name="email"/>
							    	<field name="phone"/>
							    	<field name="comment"/>
							    </list>
		        			</field>
		        		</page>
		        	</notebook>
		        </form>
			</field>
		</record>

		<!-- Inherit Form View to Modify it -->
		<record id="legal_person_field_show" model="ir.ui.view">
		    <field name="name">legal_person_field_show</field>
		    <field name="model">res.partner</field>
			<field name="priority" eval="19"/>
		    <field name="inherit_id" ref="marvelsa_sepomex.view_colony_partner_form"/>
		    <field name="arch" type="xml">
		        <xpath expr="//field[@name='postal_code_id']" position="before">
		            <field name="legal_person_id" readonly="1" groups="!sale_marvelsa.permission_of_legal_person"/>
                    <field name="legal_person_id" readonly="0" options="{'no_create': True}" groups="sale_marvelsa.permission_of_legal_person"/>
		        </xpath>
		    </field>
		</record>

		<record id="action_delivery_address_partner" model="ir.actions.act_window">
            <field name="name">Delivery addresses</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('customer_rank','>=',1)]</field>
        </record>

        <record id="action_delivery_address_partner_tree" model="ir.actions.act_window.view">
            <field name="sequence" eval="1"/>
            <field name="view_mode">list</field>
            <field name="view_id" ref="view_delivery_address_partner_tree"/>
            <field name="act_window_id" ref="action_delivery_address_partner"/>
        </record>

        <record id="action_delivery_address_partner_form" model="ir.actions.act_window.view">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_delivery_address_partner_form"/>
            <field name="act_window_id" ref="action_delivery_address_partner"/>
        </record>

        <menuitem action="action_delivery_address_partner"
            id="menu_delivery_address_partner" parent="sale.sale_order_menu" groups="sale_marvelsa.delivery_address_group" />

	</data>
</odoo>